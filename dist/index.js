function t(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var n=/*#__PURE__*/t(require("pg"));const e="undefined"!=typeof Symbol?Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")):"@@iterator";function r(t,n,e){if(!t.s){if(e instanceof o){if(!e.s)return void(e.o=r.bind(null,t,n));1&n&&(n=e.s),e=e.v}if(e&&e.then)return void e.then(r.bind(null,t,n),r.bind(null,t,2));t.s=n,t.v=e;var i=t.o;i&&i(t)}}var o=/*#__PURE__*/function(){function t(){}return t.prototype.then=function(n,e){var o=new t,i=this.s;if(i){var u=1&i?n:e;if(u){try{r(o,1,u(this.v))}catch(t){r(o,2,t)}return o}return this}return this.o=function(t){try{var i=t.v;1&t.s?r(o,1,n?n(i):i):e?r(o,1,e(i)):r(o,2,i)}catch(t){r(o,2,t)}},o},t}();function i(t){return t instanceof o&&1&t.s}var u=n.default.Client,a=null;exports.connect=function(t){try{return a=new u({user:t.user,password:t.password,host:t.host,port:t.port,database:t.database}),Promise.resolve(a.connect()).then(function(){return a})}catch(t){return Promise.reject(t)}},exports.createTables=function(){try{if(!a)throw new Error("Database not connected");var t=[{name:"local_logs",columns:[{name:"id",type:"bigserial"},{name:"message",type:"text"},{name:"created_at",type:"timestamp"},{name:"author",type:"uuid"},{name:"type",type:"smallint"}]}],n=function(t,n,u){if("function"==typeof t[e]){var a,c,f,s=t[e]();if(function t(e){try{for(;!(a=s.next()).done;)if((e=n(a.value))&&e.then){if(!i(e))return void e.then(t,f||(f=r.bind(null,c=new o,2)));e=e.v}c?r(c,1,e):c=e}catch(t){r(c||(c=new o),2,t)}}(),s.return){var l=function(t){try{a.done||s.return()}catch(t){}return t};if(c&&c.then)return c.then(l,function(t){throw l(t)});l()}return c}if(!("length"in t))throw new TypeError("Object is not iterable");for(var h=[],v=0;v<t.length;v++)h.push(t[v]);return function(t,n,e){var u,a,c=-1;return function e(f){try{for(;++c<t.length;)if((f=n(c))&&f.then){if(!i(f))return void f.then(e,a||(a=r.bind(null,u=new o,2)));f=f.v}u?r(u,1,f):u=f}catch(t){r(u||(u=new o),2,t)}}(),u}(h,function(t){return n(h[t])})}(t,function(t){var n=t.columns.map(function(t){return t.name+" "+t.type}).join(", ");return Promise.resolve(a.query("CREATE TABLE IF NOT EXISTS "+t.name+" ("+n+")")).then(function(){})});return Promise.resolve(n&&n.then?n.then(function(){return t}):t)}catch(t){return Promise.reject(t)}},exports.getVersion=function(){return"1.0.0"},exports.log=function(){return Promise.resolve()};
