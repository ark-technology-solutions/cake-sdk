!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("pg")):"function"==typeof define&&define.amd?define(["exports","pg"],e):e((n||self).cakeSdk={},n.pg)}(this,function(n,e){function t(n){return n&&"object"==typeof n&&"default"in n?n:{default:n}}var r=/*#__PURE__*/t(e);const o="undefined"!=typeof Symbol?Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")):"@@iterator";function i(n,e,t){if(!n.s){if(t instanceof u){if(!t.s)return void(t.o=i.bind(null,n,e));1&e&&(e=t.s),t=t.v}if(t&&t.then)return void t.then(i.bind(null,n,e),i.bind(null,n,2));n.s=e,n.v=t;var r=n.o;r&&r(n)}}var u=/*#__PURE__*/function(){function n(){}return n.prototype.then=function(e,t){var r=new n,o=this.s;if(o){var u=1&o?e:t;if(u){try{i(r,1,u(this.v))}catch(n){i(r,2,n)}return r}return this}return this.o=function(n){try{var o=n.v;1&n.s?i(r,1,e?e(o):o):t?i(r,1,t(o)):i(r,2,o)}catch(n){i(r,2,n)}},r},n}();function f(n){return n instanceof u&&1&n.s}var c=new(0,r.default.Client);n.connect=function(){try{return Promise.resolve(c.connect()).then(function(){return c})}catch(n){return Promise.reject(n)}},n.createTables=function(){try{var n=[{name:"local_logs",columns:[{name:"id",type:"bigserial"},{name:"message",type:"text"},{name:"created_at",type:"timestamp"},{name:"author",type:"uuid"},{name:"type",type:"tinyint"}]}],e=function(n,e,t){if("function"==typeof n[o]){var r,c,a,l=n[o]();if(function n(t){try{for(;!(r=l.next()).done;)if((t=e(r.value))&&t.then){if(!f(t))return void t.then(n,a||(a=i.bind(null,c=new u,2)));t=t.v}c?i(c,1,t):c=t}catch(n){i(c||(c=new u),2,n)}}(),l.return){var s=function(n){try{r.done||l.return()}catch(n){}return n};if(c&&c.then)return c.then(s,function(n){throw s(n)});s()}return c}if(!("length"in n))throw new TypeError("Object is not iterable");for(var h=[],y=0;y<n.length;y++)h.push(n[y]);return function(n,e,t){var r,o,c=-1;return function t(a){try{for(;++c<n.length;)if((a=e(c))&&a.then){if(!f(a))return void a.then(t,o||(o=i.bind(null,r=new u,2)));a=a.v}r?i(r,1,a):r=a}catch(n){i(r||(r=new u),2,n)}}(),r}(h,function(n){return e(h[n])})}(n,function(n){var e=n.columns.map(function(n){return n.name+" "+n.type}).join(", ");return Promise.resolve(c.query("CREATE TABLE IF NOT EXISTS "+n.name+" ("+e+")")).then(function(){})});return Promise.resolve(e&&e.then?e.then(function(){return n}):n)}catch(n){return Promise.reject(n)}},n.getVersion=function(){return"1.0.0"},n.log=function(){return Promise.resolve()}});
