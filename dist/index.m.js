import n from"pg";const t="undefined"!=typeof Symbol?Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")):"@@iterator";function e(n,t,i){if(!n.s){if(i instanceof r){if(!i.s)return void(i.o=e.bind(null,n,t));1&t&&(t=i.s),i=i.v}if(i&&i.then)return void i.then(e.bind(null,n,t),e.bind(null,n,2));n.s=t,n.v=i;var o=n.o;o&&o(n)}}var r=/*#__PURE__*/function(){function n(){}return n.prototype.then=function(t,r){var i=new n,o=this.s;if(o){var u=1&o?t:r;if(u){try{e(i,1,u(this.v))}catch(n){e(i,2,n)}return i}return this}return this.o=function(n){try{var o=n.v;1&n.s?e(i,1,t?t(o):o):r?e(i,1,r(o)):e(i,2,o)}catch(n){e(i,2,n)}},i},n}();function i(n){return n instanceof r&&1&n.s}var o=function(){return Promise.resolve()},u=function(){try{var n=[{name:"local_logs",columns:[{name:"id",type:"bigserial"},{name:"message",type:"text"},{name:"created_at",type:"timestamp"},{name:"author",type:"uuid"},{name:"type",type:"tinyint"}]}],o=function(n,o,u){if("function"==typeof n[t]){var c,f,a,l=n[t]();if(function n(t){try{for(;!(c=l.next()).done;)if((t=o(c.value))&&t.then){if(!i(t))return void t.then(n,a||(a=e.bind(null,f=new r,2)));t=t.v}f?e(f,1,t):f=t}catch(n){e(f||(f=new r),2,n)}}(),l.return){var s=function(n){try{c.done||l.return()}catch(n){}return n};if(f&&f.then)return f.then(s,function(n){throw s(n)});s()}return f}if(!("length"in n))throw new TypeError("Object is not iterable");for(var h=[],m=0;m<n.length;m++)h.push(n[m]);return function(n,t,o){var u,c,f=-1;return function o(a){try{for(;++f<n.length;)if((a=t(f))&&a.then){if(!i(a))return void a.then(o,c||(c=e.bind(null,u=new r,2)));a=a.v}u?e(u,1,a):u=a}catch(n){e(u||(u=new r),2,n)}}(),u}(h,function(n){return o(h[n])})}(n,function(n){var t=n.columns.map(function(n){return n.name+" "+n.type}).join(", ");return Promise.resolve(a.query("CREATE TABLE IF NOT EXISTS "+n.name+" ("+t+")")).then(function(){})});return Promise.resolve(o&&o.then?o.then(function(){return n}):n)}catch(n){return Promise.reject(n)}},c=function(n){try{return a=new f({connectionString:n}),Promise.resolve(a.connect()).then(function(){return a})}catch(n){return Promise.reject(n)}},f=n.Client,a=null;function l(){return"1.0.0"}export{c as connect,u as createTables,l as getVersion,o as log};
