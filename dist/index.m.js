import n from"pg";const t="undefined"!=typeof Symbol?Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")):"@@iterator";function e(n,t,o){if(!n.s){if(o instanceof r){if(!o.s)return void(o.o=e.bind(null,n,t));1&t&&(t=o.s),o=o.v}if(o&&o.then)return void o.then(e.bind(null,n,t),e.bind(null,n,2));n.s=t,n.v=o;var i=n.o;i&&i(n)}}var r=/*#__PURE__*/function(){function n(){}return n.prototype.then=function(t,r){var o=new n,i=this.s;if(i){var u=1&i?t:r;if(u){try{e(o,1,u(this.v))}catch(n){e(o,2,n)}return o}return this}return this.o=function(n){try{var i=n.v;1&n.s?e(o,1,t?t(i):i):r?e(o,1,r(i)):e(o,2,i)}catch(n){e(o,2,n)}},o},n}();function o(n){return n instanceof r&&1&n.s}var i=function(){return Promise.resolve()},u=function(){try{var n=[{name:"local_logs",columns:[{name:"id",type:"bigserial"},{name:"message",type:"text"},{name:"created_at",type:"timestamp"},{name:"author",type:"uuid"},{name:"type",type:"tinyint"}]}],i=function(n,i,u){if("function"==typeof n[t]){var c,f,a,s=n[t]();if(function n(t){try{for(;!(c=s.next()).done;)if((t=i(c.value))&&t.then){if(!o(t))return void t.then(n,a||(a=e.bind(null,f=new r,2)));t=t.v}f?e(f,1,t):f=t}catch(n){e(f||(f=new r),2,n)}}(),s.return){var l=function(n){try{c.done||s.return()}catch(n){}return n};if(f&&f.then)return f.then(l,function(n){throw l(n)});l()}return f}if(!("length"in n))throw new TypeError("Object is not iterable");for(var h=[],v=0;v<n.length;v++)h.push(n[v]);return function(n,t,i){var u,c,f=-1;return function i(a){try{for(;++f<n.length;)if((a=t(f))&&a.then){if(!o(a))return void a.then(i,c||(c=e.bind(null,u=new r,2)));a=a.v}u?e(u,1,a):u=a}catch(n){e(u||(u=new r),2,n)}}(),u}(h,function(n){return i(h[n])})}(n,function(n){var t=n.columns.map(function(n){return n.name+" "+n.type}).join(", ");return Promise.resolve(f.query("CREATE TABLE IF NOT EXISTS "+n.name+" ("+t+")")).then(function(){})});return Promise.resolve(i&&i.then?i.then(function(){return n}):n)}catch(n){return Promise.reject(n)}},c=function(){try{return Promise.resolve(f.connect()).then(function(){return f})}catch(n){return Promise.reject(n)}};console.log("process.env.DATABASE_URL",process.env.DATABASE_URL);var f=new(0,n.Client)({connectionString:process.env.DATABASE_URL});function a(){return"1.0.0"}export{c as connect,u as createTables,a as getVersion,i as log};
